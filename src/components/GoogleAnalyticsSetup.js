import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { BarChart3, X, Copy, Check, ExternalLink, AlertTriangle } from 'lucide-react';
const GoogleAnalyticsSetup = ({ onClose }) => {
    const [trackingId, setTrackingId] = useState('');
    const [copiedStep, setCopiedStep] = useState(null);
    const copyToClipboard = (text, step) => {
        navigator.clipboard.writeText(text);
        setCopiedStep(step);
        setTimeout(() => setCopiedStep(null), 2000);
    };
    const gtagCode = `<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=${trackingId || 'G-XXXXXXXXXX'}"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', '${trackingId || 'G-XXXXXXXXXX'}');
</script>`;
    const reactGACode = `// npm install react-ga4
import ReactGA from 'react-ga4';

// No main.tsx ou App.tsx
ReactGA.initialize('${trackingId || 'G-XXXXXXXXXX'}');

// Para rastrear page views
ReactGA.send({ hitType: "pageview", page: window.location.pathname });`;
    const analyticsAPICode = `// Para buscar dados do Google Analytics
// npm install googleapis

import { google } from 'googleapis';

const analytics = google.analytics('v3');
const auth = new google.auth.GoogleAuth({
  keyFile: 'path/to/service-account-key.json',
  scopes: ['https://www.googleapis.com/auth/analytics.readonly'],
});

// Exemplo de busca de dados
const response = await analytics.data.ga.get({
  auth,
  ids: 'ga:${trackingId || 'XXXXXXXXX'}',
  'start-date': '30daysAgo',
  'end-date': 'today',
  metrics: 'ga:sessions,ga:users,ga:pageviews',
  dimensions: 'ga:date'
});`;
    return (_jsxs("div", { className: "fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4", children: [_jsxs("div", { className: "bg-gray-900 rounded-lg border border-cyan-500/50 p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto", children: [_jsxs("div", { className: "flex items-center justify-between mb-6", children: [_jsxs("div", { className: "flex items-center space-x-3", children: [_jsx("div", { className: "cyber-border rounded-full p-2", children: _jsx(BarChart3, { className: "w-6 h-6 text-cyan-400" }) }), _jsxs("div", { children: [_jsx("h2", { className: "text-2xl font-bold text-cyan-400", children: "Configura\u00E7\u00E3o Google Analytics" }), _jsx("p", { className: "text-gray-400", children: "Integre analytics reais ao seu dashboard" })] })] }), _jsx("button", { onClick: onClose, className: "p-2 rounded-lg text-gray-400 hover:text-white hover:bg-gray-800 transition-colors", children: _jsx(X, { className: "w-6 h-6" }) })] }), _jsx("div", { className: "bg-blue-500/20 border border-blue-500/30 rounded-lg p-4 mb-6", children: _jsxs("div", { className: "flex items-start space-x-3", children: [_jsx(AlertTriangle, { className: "w-5 h-5 text-blue-400 mt-0.5" }), _jsxs("div", { children: [_jsx("h3", { className: "text-blue-400 font-semibold mb-2", children: "Sobre esta Integra\u00E7\u00E3o" }), _jsx("p", { className: "text-gray-300 text-sm", children: "Esta configura\u00E7\u00E3o permitir\u00E1 substituir os dados simulados por dados reais do Google Analytics 4. Voc\u00EA precisar\u00E1 de uma conta do Google Analytics e conhecimentos b\u00E1sicos de desenvolvimento." })] })] }) }), _jsxs("div", { className: "mb-6", children: [_jsx("label", { className: "block text-sm font-medium text-gray-300 mb-2", children: "Google Analytics Tracking ID (GA4)" }), _jsx("input", { type: "text", value: trackingId, onChange: (e) => setTrackingId(e.target.value), placeholder: "G-XXXXXXXXXX", className: "w-full p-3 bg-black border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-cyan-400 focus:outline-none" }), _jsx("p", { className: "text-xs text-gray-400 mt-1", children: "Encontre seu ID em: Google Analytics \u2192 Admin \u2192 Data Streams \u2192 Web Stream" })] }), _jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "bg-gray-800/50 p-6 rounded-lg border border-cyan-500/30", children: [_jsxs("h3", { className: "text-lg font-bold text-cyan-400 mb-4 flex items-center", children: [_jsx("span", { className: "bg-cyan-500 text-black rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3", children: "1" }), "Criar Conta Google Analytics"] }), _jsx("div", { className: "space-y-3", children: _jsxs("ol", { className: "list-decimal list-inside space-y-2 text-sm text-gray-300 ml-4", children: [_jsxs("li", { children: ["Acesse ", _jsx("a", { href: "https://analytics.google.com", target: "_blank", rel: "noopener noreferrer", className: "text-cyan-400 hover:underline", children: "analytics.google.com" })] }), _jsx("li", { children: "Clique em \"Come\u00E7ar a medir\"" }), _jsx("li", { children: "Configure sua propriedade GA4" }), _jsx("li", { children: "Adicione um stream de dados para seu site" }), _jsx("li", { children: "Copie o Measurement ID (G-XXXXXXXXXX)" })] }) })] }), _jsxs("div", { className: "bg-gray-800/50 p-6 rounded-lg border border-green-500/30", children: [_jsxs("h3", { className: "text-lg font-bold text-green-400 mb-4 flex items-center", children: [_jsx("span", { className: "bg-green-500 text-black rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3", children: "2" }), "Instalar C\u00F3digo de Rastreamento"] }), _jsxs("div", { className: "space-y-4", children: [_jsxs("p", { className: "text-gray-300", children: ["Adicione este c\u00F3digo no ", _jsx("code", { className: "bg-gray-700 px-2 py-1 rounded", children: "index.html" }), ":"] }), _jsxs("div", { className: "bg-black/50 p-4 rounded-lg border border-gray-600", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx("span", { className: "text-sm font-medium text-gray-300", children: "HTML (index.html):" }), _jsxs("button", { onClick: () => copyToClipboard(gtagCode, 'gtag'), className: "flex items-center space-x-1 text-cyan-400 hover:text-cyan-300 text-sm", children: [copiedStep === 'gtag' ? _jsx(Check, { className: "w-4 h-4" }) : _jsx(Copy, { className: "w-4 h-4" }), _jsx("span", { children: copiedStep === 'gtag' ? 'Copiado!' : 'Copiar' })] })] }), _jsx("pre", { className: "text-sm text-green-400 overflow-x-auto", children: gtagCode })] }), _jsx("p", { className: "text-gray-300", children: "Ou use a biblioteca React GA4:" }), _jsxs("div", { className: "bg-black/50 p-4 rounded-lg border border-gray-600", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx("span", { className: "text-sm font-medium text-gray-300", children: "React GA4:" }), _jsxs("button", { onClick: () => copyToClipboard(reactGACode, 'react-ga'), className: "flex items-center space-x-1 text-cyan-400 hover:text-cyan-300 text-sm", children: [copiedStep === 'react-ga' ? _jsx(Check, { className: "w-4 h-4" }) : _jsx(Copy, { className: "w-4 h-4" }), _jsx("span", { children: copiedStep === 'react-ga' ? 'Copiado!' : 'Copiar' })] })] }), _jsx("pre", { className: "text-sm text-blue-400 overflow-x-auto", children: reactGACode })] })] })] }), _jsxs("div", { className: "bg-gray-800/50 p-6 rounded-lg border border-purple-500/30", children: [_jsxs("h3", { className: "text-lg font-bold text-purple-400 mb-4 flex items-center", children: [_jsx("span", { className: "bg-purple-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3", children: "3" }), "Configurar Analytics Reporting API"] }), _jsxs("div", { className: "space-y-4", children: [_jsx("p", { className: "text-gray-300", children: "Para buscar dados reais no dashboard:" }), _jsxs("ol", { className: "list-decimal list-inside space-y-2 text-sm text-gray-300 ml-4", children: [_jsxs("li", { children: ["Acesse ", _jsx("a", { href: "https://console.cloud.google.com", target: "_blank", rel: "noopener noreferrer", className: "text-cyan-400 hover:underline", children: "Google Cloud Console" })] }), _jsx("li", { children: "Crie um projeto ou selecione um existente" }), _jsx("li", { children: "Ative a \"Google Analytics Reporting API\"" }), _jsx("li", { children: "Crie credenciais de Service Account" }), _jsx("li", { children: "Baixe o arquivo JSON das credenciais" }), _jsx("li", { children: "No Google Analytics, adicione o email do Service Account como usu\u00E1rio" })] }), _jsxs("div", { className: "bg-black/50 p-4 rounded-lg border border-gray-600", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx("span", { className: "text-sm font-medium text-gray-300", children: "C\u00F3digo de exemplo:" }), _jsxs("button", { onClick: () => copyToClipboard(analyticsAPICode, 'api'), className: "flex items-center space-x-1 text-cyan-400 hover:text-cyan-300 text-sm", children: [copiedStep === 'api' ? _jsx(Check, { className: "w-4 h-4" }) : _jsx(Copy, { className: "w-4 h-4" }), _jsx("span", { children: copiedStep === 'api' ? 'Copiado!' : 'Copiar' })] })] }), _jsx("pre", { className: "text-sm text-purple-400 overflow-x-auto", children: analyticsAPICode })] })] })] }), _jsxs("div", { className: "bg-gray-800/50 p-6 rounded-lg border border-yellow-500/30", children: [_jsxs("h3", { className: "text-lg font-bold text-yellow-400 mb-4 flex items-center", children: [_jsx("span", { className: "bg-yellow-500 text-black rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3", children: "4" }), "Atualizar Dashboard"] }), _jsxs("div", { className: "space-y-3", children: [_jsxs("p", { className: "text-gray-300", children: ["Modifique o ", _jsx("code", { className: "bg-gray-700 px-2 py-1 rounded", children: "AdminDashboard.tsx" }), ":"] }), _jsxs("ol", { className: "list-decimal list-inside space-y-2 text-sm text-gray-300 ml-4", children: [_jsxs("li", { children: ["Substitua a fun\u00E7\u00E3o ", _jsx("code", { className: "bg-gray-700 px-1 rounded", children: "generateAnalytics" })] }), _jsx("li", { children: "Implemente chamadas para a Analytics API" }), _jsx("li", { children: "Trate erros e fallbacks" }), _jsx("li", { children: "Adicione loading states" }), _jsx("li", { children: "Configure refresh autom\u00E1tico" })] })] })] })] }), _jsxs("div", { className: "mt-6 bg-gray-800/30 p-4 rounded-lg border border-gray-600", children: [_jsx("h4", { className: "text-white font-semibold mb-3", children: "Vari\u00E1veis de Ambiente" }), _jsxs("div", { className: "space-y-2 text-sm", children: [_jsxs("div", { className: "flex justify-between", children: [_jsx("code", { className: "text-cyan-400", children: "VITE_GA_TRACKING_ID" }), _jsx("span", { className: "text-gray-400", children: trackingId || 'G-XXXXXXXXXX' })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("code", { className: "text-cyan-400", children: "GOOGLE_APPLICATION_CREDENTIALS" }), _jsx("span", { className: "text-gray-400", children: "path/to/service-account.json" })] })] })] }), _jsxs("div", { className: "mt-6 bg-gray-800/30 p-4 rounded-lg border border-gray-600", children: [_jsx("h4", { className: "text-white font-semibold mb-3", children: "Links \u00DAteis" }), _jsxs("div", { className: "grid md:grid-cols-2 gap-3 text-sm", children: [_jsxs("a", { href: "https://analytics.google.com", target: "_blank", rel: "noopener noreferrer", className: "flex items-center space-x-2 text-cyan-400 hover:text-cyan-300", children: [_jsx(ExternalLink, { className: "w-4 h-4" }), _jsx("span", { children: "Google Analytics" })] }), _jsxs("a", { href: "https://console.cloud.google.com", target: "_blank", rel: "noopener noreferrer", className: "flex items-center space-x-2 text-cyan-400 hover:text-cyan-300", children: [_jsx(ExternalLink, { className: "w-4 h-4" }), _jsx("span", { children: "Google Cloud Console" })] }), _jsxs("a", { href: "https://developers.google.com/analytics/devguides/reporting/core/v4", target: "_blank", rel: "noopener noreferrer", className: "flex items-center space-x-2 text-cyan-400 hover:text-cyan-300", children: [_jsx(ExternalLink, { className: "w-4 h-4" }), _jsx("span", { children: "Analytics API Docs" })] }), _jsxs("a", { href: "https://www.npmjs.com/package/react-ga4", target: "_blank", rel: "noopener noreferrer", className: "flex items-center space-x-2 text-cyan-400 hover:text-cyan-300", children: [_jsx(ExternalLink, { className: "w-4 h-4" }), _jsx("span", { children: "React GA4 Package" })] })] })] }), _jsx("div", { className: "mt-6 pt-4 border-t border-gray-700 text-center", children: _jsx("p", { className: "text-gray-400 text-sm", children: "Ap\u00F3s a configura\u00E7\u00E3o, os dados reais substituir\u00E3o os simulados no dashboard." }) })] }), _jsx("style", { dangerouslySetInnerHTML: {
                    __html: `
          .cyber-border {
            background: linear-gradient(45deg, #00ffff, #ff00ff, #ffff00, #00ffff);
            background-size: 400% 400%;
            animation: gradient-shift 3s ease infinite;
            padding: 2px;
          }
          
          @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
          }
        `
                } })] }));
};
export default GoogleAnalyticsSetup;
